import{_ as e,c as a,d as l,r as s,a5 as t,e as i,f as n,h as o,j as c,w as r,F as u,a6 as d,S as p,k as f,m,T as _,y as x,U as y,p as h,l as k,L as g,W as v,v as b,z as j,n as z,q as C,a7 as w,A as I}from"./index-C8SuCoiN.js";import{_ as T}from"./uni-icons.CrP5nmgM.js";import F from"./components-tabbar-tabbar.DXLkSQCL.js";import{T as L}from"./index.Da2PtO-V.js";import"./time.Bo7V4Rh2.js";import"./index.DkLiy4Dr.js";import"./image.CYzgXnSN.js";const V=e({__name:"index",setup(e){a((async()=>{let{data:{data:e}}=await l();V.value=e}));let V=s([]),U=s([]),$=t([]);function q(e){if(e){let a=$.findIndex((a=>a==e));-1!=a&&$.splice(a,1)}else g({title:"提示",content:"是否要清空搜索记录？",success:function(e){e.confirm&&(console.log("用户点击确定"),$.splice(0,$.length))}})}let A=function(e,a){let l;return function(){let s=this,t=arguments;clearTimeout(l),l=setTimeout((function(){e.apply(s,t)}),a)}}((async()=>{if(S.value){$.unshift(S.value);let{data:{data:e}}=await w(S.value);e.length?U.value=e:I({icon:"none",title:"搜索结果为空",duration:2e3})}else U.value=[]}),1e3),S=s("");return(e,a)=>{const l=i(n("up-icon"),d),s=v,t=i(n("uni-icons"),T),g=b,w=p,I=i(n("tabbar"),F);return f(),o(u,null,[c(w,{"scroll-y":!0},{default:r((()=>[c(g,{id:"page"},{default:r((()=>[c(g,{class:"header"},{default:r((()=>[c(g,{class:"search"},{default:r((()=>[c(l,{name:"search",size:"40rpx",class:"search-icon"}),c(s,{onInput:a[0]||(a[0]=e=>m(A)()),type:"text",placeholder:"搜索帖子和文章",modelValue:m(S),"onUpdate:modelValue":a[1]||(a[1]=e=>_(S)?S.value=e:S=e),class:"input"},null,8,["modelValue"]),m(S)?(f(),x(t,{key:0,type:"close",size:"44rpx",class:"close",color:"rgb(147, 146, 153)",onClick:a[2]||(a[2]=e=>(S.value="",void(U.value=[])))})):y("",!0)])),_:1}),c(g,{class:"history-title"},{default:r((()=>[c(g,{class:"boldface"},{default:r((()=>[h(" 搜索历史 ")])),_:1}),c(g,{class:"space"}),c(g,{class:"clear",onClick:a[3]||(a[3]=e=>q())},{default:r((()=>[c(l,{name:"trash",size:"38rpx"}),c(g,null,{default:r((()=>[h(" 清空")])),_:1})])),_:1})])),_:1}),m($).length?(f(),x(g,{key:1,class:"search-history"},{default:r((()=>[(f(!0),o(u,null,k(m($),((e,a)=>(f(),x(g,{class:"item",key:e},{default:r((()=>[c(g,null,{default:r((()=>[h(j(e),1)])),_:2},1024),c(t,{type:"closeempty",size:"34rpx",color:"#929292",style:{margin:"0rpx 5rpx"},onClick:a=>q(e)},null,8,["onClick"])])),_:2},1024)))),128))])),_:1})):(f(),x(g,{key:0,class:"blank"},{default:r((()=>[h(" 暂无搜索记录 ")])),_:1}))])),_:1})])),_:1}),m(U).length?(f(),x(m(L),{key:1,topicList:m(U)},null,8,["topicList"])):(f(),x(g,{key:0,class:"popular"},{default:r((()=>[c(g,{class:"title"},{default:r((()=>[c(t,{type:"fire-filled",size:"36rpx",color:"#FF2545"}),c(g,{style:{"font-style":"italic","font-size":"34rpx","font-weight":"600",margin:"0rpx 16rpx 0rpx 12rpx"}},{default:r((()=>[h("热门帖子 ")])),_:1}),c(g,{style:{color:"#939299","font-style":"italic","font-size":"26rpx","margin-top":"5rpx"}},{default:r((()=>[h("大家都在看")])),_:1})])),_:1}),c(g,{class:"list"},{default:r((()=>[(f(!0),o(u,null,k(m(V),((e,a)=>(f(),x(g,{class:"item",key:e.id,onClick:a=>{return l=e.tid,void C({url:`/pages/details/index?id=${l}`});var l}},{default:r((()=>[c(g,{class:z(a<=2?`color${a}`:"index")},{default:r((()=>[h(j(a+1),1)])),_:2},1032,["class"]),c(g,{class:"content"},{default:r((()=>[h(j(e.title),1)])),_:2},1024),c(g,{style:{color:"#C7C7C7","font-size":"26rpx"}},{default:r((()=>[h(j(e.score)+"热度",1)])),_:2},1024)])),_:2},1032,["onClick"])))),128))])),_:1})])),_:1}))])),_:1}),c(I,{checkedIndex:"1"})],64)}}},[["__scopeId","data-v-90a6daa7"]]);export{V as default};
